<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èŒ¶è‰ºè¡¨æ¼”</title>
    <link rel="stylesheet" href="../css/common.css">
    <style>
        body {
            background: var(--bg-color);
            font-family: "FangSong", "ä»¿å®‹", STFangsong, "åæ–‡ä»¿å®‹", serif;
            background-image: url('../images/tea_etiquette/bg1.jpg');
        }


        /* ä¼ ç»Ÿå·¥è‰ºæ ·å¼ */
        :root {
            --primary-color: #4A593D;     /* æ›´æ·±æ²‰çš„èŒ¶é’è‰² */
            --secondary-color: #8E7757;   /* æ¸©æ¶¦çš„èŒ¶è¤è‰² */
            --accent-color: #C7B7A3;      /* å…¸é›…çš„ç±³è¤è‰² */
            --bg-color: #F9F6F1;         /* æ¸©å’Œçš„ç±³ç™½åº•è‰² */
            --process-red: #D32F2F;
        }

        .traditional-section {
            padding: 40px 0;
        }

        .master-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }


        .introduction-box {
        grid-column: 1 / -1;
        border-radius: 15px;
        margin-bottom: 0px;
        box-shadow: 2px 4px 15px rgba(0,0,0,0.05);    }


    .introduction-box h2 {
        color: var(--primary-color);
        margin-bottom: 15px;
        font-size: 1.8em;
        display: flex;
        align-items: center;
        gap: 10px;
        font-family: "KaiTi", "æ¥·ä½“", STKaiti, "åæ–‡æ¥·ä½“", serif;
        letter-spacing: 0.1em;
    }

    .introduction-box p {
        color: #666;
        line-height: 1.8;
        font-size: 1.1em;
        margin: 0;
    }

    /* æ·»åŠ æ°´å¢¨æ•ˆæœè£…é¥° */
    .introduction-box::before {
        content: '';
        position: absolute;
        top: -10px;
        right: -10px;
        width: 60px;
        height: 60px;
        background: url('ink-decoration.png') no-repeat center/contain;
        opacity: 0.15;
        pointer-events: none;
    }

    /* ä¼˜åŒ–èŒ¶å…·å±•ç¤º */
    .equipment-showcase .item {
        position: relative;
        padding: 20px;
        border: 1px solid var(--accent-color);
        border-radius: 8px;
        transition: transform 0.3s ease;
    }

    .equipment-showcase .item:hover {
        transform: translateY(-5px);
    }

    /* æ·»åŠ ä¼ ç»Ÿçº¹æ ·èƒŒæ™¯ */
    .quiz-container {
        background: rgba(255,255,255,0.95);
        background-image: url('traditional-pattern.png');
        background-blend-mode: overlay;
        background-size: 200px;
        background-repeat: repeat;
    }

@keyframes highlight {
    0% { background: rgba(107, 142, 35, 0.1); }
    100% { background: transparent; }
}



.steps-container {
            width: 1200px;
            height: 400px;
            border-radius: 20px;
            position: relative;
            overflow: hidden;
            margin-left: 120px;
        }

        .step-card {
            position: absolute;
            width: 100%;
            height: 320px;
            padding: 30px;
            display: flex;
            opacity: 0;
            z-index: 1;
            pointer-events: none;
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            transform: scale(0.98);
        }

        #slide_1:checked ~ .card-1,
        #slide_2:checked ~ .card-2,
        #slide_3:checked ~ .card-3 {
            opacity: 1;
            z-index: 2;
            pointer-events: auto;
            transform: scale(1);
        }

        .step-card .img {
            width: 240px;
            height: 240px;
            border-radius: 15px;
            overflow: hidden;
            flex-shrink: 0;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            margin-right: 100px;
        }

        .step-slider {
            position: absolute;
            bottom: 20px;
            left: 65%;
            transform: translateX(-50%);
            z-index: 3;
            display: flex;
            gap: 10px;
            box-shadow: 0 5px 15px rgba(74,89,61,0.1);
        }

        .step-slider .slide {
            width: 50px;
    height: 50px;
    background: #8e7757a1;
    border-radius: 50px;
    cursor: pointer;
    overflow: hidden;
    margin-left: 90px;
    margin-right: 200px;
        }
        .step-slider .slide:hover{
            background-color: #F9F6F1;
        }

        .step-slider .slide::before {
            content: '';
            width: 100%;
            height: 100%;
            background: #6B8E23;
            transform: scaleX(0);
            transition: transform 0.6s ease;
        }

        #slide_1:checked ~ .step-slider .slide-1::before,
        #slide_2:checked ~ .step-slider .slide-2::before,
        #slide_3:checked ~ .step-slider .slide-3::before {
            transform: scaleX(1);
        }
        .compact-title {
    max-width: 940px;
    margin: 10px 0px 0 100px;
    padding: 20px 30px !important;
}

.compact-title h2 {
    font-size: 1.6rem;
    letter-spacing: 0.05em;
}

.compact-title p {
    font-size: 1rem;
    line-height: 1.6;
}

/* æ­¥éª¤å®¹å™¨å®½åº¦è°ƒæ•´ */
.steps-container {
    width: 90%; /* æ”¹ä¸ºç™¾åˆ†æ¯”è‡ªé€‚åº” */
    max-width: 1000px; /* å¢åŠ æœ€å¤§å®½åº¦é™åˆ¶ */
}

/* ç§»åŠ¨ç«¯é€‚é… */
@media (max-width: 768px) {
    .compact-title {
        margin: 0 auto 20px;
        padding: 15px 20px !important;
    }
    
    .steps-container {
        width: 95%;
        height: auto;
        min-height: 400px;
    }
    
    .step-card {
        flex-direction: column;
        height: auto;
        padding: 20px;
    }
    
    .step-card .img {
        width: 100%;
        height: 200px;
        margin-bottom: 20px;
    }
}

  /* æ™ºèƒ½èŒ¶å¸­æ ·å¼ */
  .digital-section {
            padding: 40px 0;
            margin-bottom: 50px;
        }

        .lab-container {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .workbench {
            background-image: url(../images/tea_art/teamakebg.png);
            height: 600px;
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }

        .tea-object {
            position: absolute;
            cursor: grab;
            will-change: transform;
            transition: transform 0.2s ease-out;
        }

        #teapot {
            width: 150px;
            right: 50px;
            top: 400px;
            z-index: 2;
            filter: drop-shadow(3px 5px 2px rgba(0,0,0,0.2));
            transform-origin: 75% 60%;
        }

        #teacup {
            width: 120px;
            right: 200px;
            bottom: 100px;
            filter: drop-shadow(2px 3px 2px rgba(0,0,0,0.15));
        }



        /* èŒ¶æ°´ç²’å­æ•ˆæœ */
        .tea-particle {
            position: absolute;
            width: 8px;
            height: 8px;
            background: rgba(139, 69, 19, 0.6);
            border-radius: 50%;
            pointer-events: none;
            z-index: 1;
        }

        @keyframes particleAnimation {
            0% {
                transform: translate(0, 0) scale(1);
                opacity: 0.8;
            }
            100% {
                transform: translate(var(--tx), var(--ty)) scale(0);
                opacity: 0;
            }
        }

        /* æ°´æ³¢çº¹æ•ˆæœ */
        @keyframes ripple {
            0% { 
                transform: scale(0.3); 
                opacity: 0.8; 
            }
            100% { 
                transform: scale(2); 
                opacity: 0; 
            }
        }

        .ripple {
            position: absolute;
            pointer-events: none;
            background: rgba(139, 69, 19, 0.2);
            border-radius: 50%;
            transform-origin: center;
            animation: ripple 1s ease-out forwards;
        }

        /* æ§åˆ¶é¢æ¿æ ·å¼ */
        .control-panel {

            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            backdrop-filter: blur(5px);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-control {
            width: 100%;
            padding: 8px;
            border: 2px solid #ddd;
            border-radius: 8px;
            transition: border-color 0.3s;
        }

        .form-control:focus {
            border-color: #6b8c42;
            outline: none;
        }

        .timer {
            background: #f0f0f0;
            height: 40px;
            border-radius: 20px;
            margin: 20px 0;
            overflow: hidden;
            position: relative;
        }

        .timer-progress {
            height: 100%;
            background: linear-gradient(90deg, #6b8c42 0%, #8abf7e 100%);
            width: 0;
            transition: width 1s linear;
        }

        .timer-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #333;
            font-weight: bold;
        }

        .video-container {
            margin-top: 25px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }

        /* å¤ä½è½¨è¿¹æ•ˆæœ */
        #teapot::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 2px;
            background: rgba(0,0,0,0.1);
            bottom: -10px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        #teapot.resetting::after {
            opacity: 1;
            animation: resetTrail 0.8s linear forwards;
        }

        @keyframes resetTrail {
            from { width: 100% }
            to { width: 0 }
        }

        /* ç­”é¢˜æ¸¸æˆæ ·å¼ */
.quiz-container {
    max-width: 960px;
    margin: 10rem auto;
    padding: 2rem;
    background: #a9b69d;
    background: url('../images/tea_art/quiz_card.png') no-repeat;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(61,84,56,0.1);
}

.quiz-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 2rem;
    padding: 1rem;
    border-radius: 8px;
}

.progress-bar {
    height: 8px;
    background: #c5a173;
    width: 0%;
    transition: width 0.3s ease;
}

.current-score {
    color: #3d5438;
    font-size: 1.8em;
    font-family: 'æ¥·ä½“';
}

.streak-count {
    color: #c5a173;
    padding: 0.3rem 0.6rem;
    background: #f3e6d1;;
    border-radius: 4px;
}



.question-card {
    min-height: 300px;
}

.question-text {
    font-size: 1.3rem;
    color: #3d5438;
    margin-bottom: 2rem;
    line-height: 1.5;
    font-family: 'æ¥·ä½“';
}

.options-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
}

.option-btn {
    padding: 1.2rem;
    border: 2px solid #f0e6dd;
    border-radius: 8px;
    background: #f3e6d175;
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: left;
    font-size: 1rem;
}

.option-btn:hover:not(.correct):not(.wrong) {
    transform: translateY(-2px);
    box-shadow: 0 3px 10px rgba(61,84,56,0.1);
}

.option-btn.correct {
    background: #e8f5e9;
    border-color: #81c784;
    animation: correct-bounce 0.5s ease;
}

.option-btn.wrong {
    background: #ffebee;
    border-color: #ef9a9a;
    animation: wrong-shake 0.4s ease;
}

@keyframes correct-bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-8px); }
}

@keyframes wrong-shake {
    0% { transform: translateX(0); }
    25% { transform: translateX(8px); }
    50% { transform: translateX(-8px); }
    75% { transform: translateX(4px); }
    100% { transform: translateX(0); }
}

.result-card {
    text-align: center;
    padding: 2rem;
}

.result-icon {
    font-size: 4rem;
    margin-bottom: 1rem;
    animation: result-pop 0.6s ease;
}

@keyframes result-pop {
    0% { transform: scale(0); }
    60% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

.restart-btn {
    padding: 1rem 2rem;
    background: #3d5438;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: transform 0.2s ease;
}

.restart-btn:hover {
    transform: scale(1.05);
}

.hidden {
    display: none;
}

.img {
    width: 240px;
    height: 240px;
    border-radius: 15px;
    overflow: hidden;
    position: relative;
    background: #EEEADE; /* å¤‡ç”¨èƒŒæ™¯è‰² */
}

.adaptive-image {
    /* æ ¸å¿ƒé€‚é…å±æ€§ */
    width: 100%;
    height: 100%;
    object-fit: contain; /* å…³é”®å±æ€§ */
    object-position: center center;
    
    /* é«˜çº§é€‚é…ç­–ç•¥ */
    display: block;
    margin: auto;
    transition: transform 0.3s ease;
    
    /* å®‰å…¨è¾¹ç•Œ */
    padding: 5px;
    box-sizing: border-box;
}

/* å“åº”å¼é€‚é… */
@media (max-width: 768px) {
    .img {
        width: 100%;
        height: 200px; /* ç§»åŠ¨ç«¯é«˜åº¦è°ƒæ•´ */
    }
    
    .adaptive-image {
        object-fit: cover; /* ç§»åŠ¨ç«¯æ”¹ç”¨è¦†ç›–å¼ */
        object-position: top center;
    }
}
.content p{
    font-size: 20px;
}

    </style>
</head>
<body>

 
    <!-- æ™ºèƒ½èŒ¶å¸­æ¨¡å— -->
    <section class="digital-section">
        <div class="lab-container">

            <div class="introduction-box " >
                <h2 style=" font-size: 30px;">è™šæ‹ŸèŒ¶å®¤</h2>
                <p>è§¦æ§å¯åŠ¨è™šæ‹ŸèŒ¶å¸­ï¼Œæ²‰æµ¸å¼è§£é”åƒå¹´èŒ—é¦™</p>
            </div>

            <div class="workbench">
                <img src="../images/tea_art/teapot.png" id="teapot" class="tea-object" draggable="false">
                <img src="../images/tea_art/teacup.png" id="teacup" class="tea-object" draggable="false">
                <div id="teaStream" class="tea-stream"></div>
            </div>

            <div class="control-panel">
                <h2>èŒ¶è‰ºæ§åˆ¶å°</h2>
                <div class="form-group">
                    <label>é€‰æ‹©èŒ¶å¶ï¼š</label>
                    <select id="teaType" class="form-control">
                        <option value="green">ç»¿èŒ¶</option>
                        <option value="oolong">ä¹Œé¾™èŒ¶</option>
                        <option value="black">çº¢èŒ¶</option>
                    </select>
                </div>
                <div class="timer">
                    <div class="timer-progress"></div>
                    <div class="timer-text">02:00</div>
                </div>
                <div class="video-container">
                    <video id="teaVideo" width="100%" controls></video>
                </div>
            </div>
        </div>
    </section>

    <section class="simplified-brewing">
        <div class="master-container">
            <div class="introduction-box compact-title">
                <h2>äº•å†ˆç¿ ç»¿å†²æ³¡æ­¥éª¤è¯¦è§£</h2>
                <p>ä¸‰æ­¥æŒæ¡ä¼ ç»ŸèŒ¶è‰ºï¼Œä½“éªŒç²¾è‡´å†²æ³¡æµç¨‹</p>
            </div>
        </div>
        <div class="steps-container">
            
            <input type="radio" name="select" id="slide_1" checked hidden>
            <input type="radio" name="select" id="slide_2" hidden>
            <input type="radio" name="select" id="slide_3" hidden>

            <div class="step-slider">
                <label for="slide_1" class="slide slide-1"></label>
                <label for="slide_2" class="slide slide-2"></label>
                <label for="slide_3" class="slide slide-3"></label>
            </div>

            <div class="step-card card-1">
                <div class="img">
                    <img src="../images/tea_art/1.png" alt="æ¸©æ¯æ´å…·" class="adaptive-image">
                </div>
                <div class="content">
                    <h2>01 æ¸©æ¯æ´å…·</h2>
                    <p>
                        ç”¨çƒ­æ°´å†²æ·‹èŒ¶å…·ï¼Œæé«˜èŒ¶å…·æ¸©åº¦ã€‚å…·ä½“æ“ä½œï¼š
                        <br>â–Œé€‰å…·ï¼šé€‰ç”¨150-200mlç™½ç“·ç›–ç¢—ï¼ˆé…ç»ç’ƒå…¬é“æ¯ï¼‰
                        <br>â–Œæ°´æ¸©ï¼šå–100â„ƒæ²¸æ°´ï¼Œå»ºè®®é€‰ç”¨TDSå€¼ï¼œ50çš„çº¯å‡€æ°´
                        <br>â–Œæ³¨æ°´ï¼šå£¶å˜´è·æ¯å£5cmé«˜å†²ï¼Œæ²¿å†…å£èºæ—‹æ³¨æ°´å½¢æˆæ¼©æ¶¡ï¼Œæ³¨è‡³å…«åˆ†æ»¡ï¼ˆè·æ¯æ²¿1.5cmï¼‰
                        <br>â–Œé™ç½®ï¼šå†¬å­£é™ç½®90ç§’/å¤å­£60ç§’ï¼ŒæœŸé—´åŠ ç›–ä¿æŒæ¸©åº¦
                        <br>â–Œå€’æ°´ï¼šå€¾æ–œ60Â°ç¼“æ…¢å€’å°½ï¼Œå€’æ¯•å€’æ‰£äºç«¹åˆ¶èŒ¶å·¾ä¸Šæ²¥æ°´
                        <br> æ³¨æ„äº‹é¡¹ï¼šç´«ç ‚å£¶éœ€å†…å¤–å†²æ·‹ä¸¤æ¬¡ï¼Œç»ç’ƒå™¨çš¿éœ€æå‰å®¤æ¸©å›æ¸©é˜²ç‚¸è£‚
                        </p>
                </div>
            </div>

            <div class="step-card card-2">
                <div class="img">
                    <img src="../images/tea_art/2.png" alt="ç½®èŒ¶é—»é¦™" class="adaptive-image">
                </div>
                <div class="content">
                    <h2>02 ç½®èŒ¶é—»é¦™</h2>
                    <p>
                        å°†èŒ¶å¶æŠ•å…¥æ¸©çƒ­çš„ç›–ç¢—ä¸­ï¼Œå…·ä½“æ“ä½œï¼š
                        <br>â–ŒæŠ•èŒ¶é‡ï¼šæŒ‰1:20èŒ¶æ°´æ¯”ï¼Œ150mlç›–ç¢—æŠ•èŒ¶7.5gï¼ˆé“ºæ»¡ç¢—åº•2å±‚ï¼‰
                        <br>â–Œæ‰‹æ³•ï¼šä½¿ç”¨ç«¹åˆ¶èŒ¶åŒ™å‘ˆ45Â°è§’æ‹¨å…¥èŒ¶å¶ï¼Œé¿å…æ‰‹éƒ¨ç›´æ¥æ¥è§¦
                        <br>â–Œæ‘‡é¦™ï¼šé¡ºæ—¶é’ˆæ—‹è½¬ç›–ç¢—3å‘¨ï¼ˆæ‰‹è…•æ‚¬ç©ºå‘åŠ›ï¼Œå¹…åº¦çº¦15Â°ï¼‰
                        <br>â–Œé—»é¦™ï¼šå¼€ç›–å‘ˆ30Â°è§’ï¼Œé¼»å°–è·ç¢—å£3cmæ·±å—…3ç§’
                        <br>â–Œæ¸©åº¦æ§åˆ¶ï¼šä¿æŒç›–ç¢—æ¸©åº¦60-65â„ƒï¼Œå¯ç”¨çƒ­æ°´æµ‡æ·‹å¤–å£ä¿æ¸©
                        <br>æ³¨æ„äº‹é¡¹ï¼šæ–°èŒ¶éœ€æå‰é†’èŒ¶30åˆ†é’Ÿï¼Œè€èŒ¶éœ€ä¿æŒæŠ•èŒ¶æ—¶å™¨çš¿å¹²ç‡¥
                        </p>
                </div>
            </div>

            <div class="step-card card-3">
                <div class="img">
                    <img src="../images/tea_art/3.png" alt="å†²æ³¡å‡ºæ±¤" class="adaptive-image">
                </div>
                <div class="content">
                    <h2>03 å†²æ³¡å‡ºæ±¤</h2>
                    <p>
                        æ²¿ç›–ç¢—è¾¹ç¼˜å®šç‚¹æ³¨æ°´ï¼Œå…·ä½“æ“ä½œï¼š
                        <br>â–Œæ³¨æ°´æ–¹å¼ï¼šé‡‡ç”¨"å‡¤å‡°ä¸‰ç‚¹å¤´"æ‰‹æ³•ï¼Œæ°´æµé«˜åº¦ä»30cmæ¸é™è‡³10cm
                        <br>â–Œæ°´æµæ§åˆ¶ï¼šæŸ±çŠ¶æ°´æµç›´å¾„â‰ˆ3mmï¼Œæµé€Ÿä¿æŒ200ml/15ç§’
                        <br>â–Œæµ¸æ³¡æ—¶é—´ï¼šé¦–æ³¡30ç§’ï¼ˆæ˜¥èŒ¶ï¼‰/20ç§’ï¼ˆå¤èŒ¶ï¼‰ï¼Œåç»­æ¯æ³¡é€’å¢5ç§’
                        <br>â–Œå‡ºæ±¤æŠ€å·§ï¼šç›–ç¢—å€¾æ–œ75Â°è§’åŒ€é€Ÿå‡ºæ±¤ï¼Œ3ç§’å†…å®Œæˆæ²¥å‡€
                        <br>æ³¨æ„äº‹é¡¹ï¼šé¿å…ç›´å†²èŒ¶å¶ï¼Œå²©èŒ¶ç±»éœ€é…åˆ"ç¯å£æ³¨æ°´"æ³•
                        <br>ä¸“å®¶å»ºè®®ï¼šé€‰ç”¨pH7.2Â±0.3çš„å¤©ç„¶å±±æ³‰æ°´å¯æå‡èŒ¶æ±¤é²œçˆ½åº¦
                        </p>
                </div>
            </div>
        </div>
    </section>

    <section class="etiquette-card" id="quiz">
        
        <div class="quiz-container">
            <div class="introduction-box">
                <h2>èŒ¶é“çŸ¥è¯†æŒ‘æˆ˜</h2>
            </div>
            <div class="quiz-header">
                <div class="quiz-progress">
                    <div class="progress-bar"></div>
                    <span class="current-score">0</span> åˆ†
                </div>
                <div class="quiz-stats">
                    <span class="streak-count">0 è¿å¯¹</span>

                </div>
            </div>
            
            <div class="question-card">
                <h3 class="question-text"></h3>
                <div class="options-grid"></div>
            </div>
            
            <div class="result-card hidden">
                <div class="result-icon">ğŸµ</div>
                <h3>æŒ‘æˆ˜å®Œæˆï¼</h3>
                <p>æœ€ç»ˆå¾—åˆ†ï¼š<span class="final-score">0</span> åˆ†</p>
                <button class="restart-btn">å†æ¥ä¸€å±€</button>
            </div>
        </div>
    </section>
    <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
    <script>

// æ¸è¿›å¼äº¤äº’
document.querySelectorAll('.step').forEach((step, index) => {
    step.addEventListener('click', () => {
        // åˆ‡æ¢æ­¥éª¤æ¿€æ´»çŠ¶æ€
        document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
        step.classList.add('active');
        
        // æ˜¾ç¤ºå¯¹åº”å†…å®¹
        document.querySelectorAll('.step-card').forEach(card => {
            card.style.display = 'none';
        });
        document.querySelector(`.step-card[data-step="${index + 1}"]`).style.display = 'block';
    });
});

// æ™ºèƒ½èŒ¶å¸­äº¤äº’
const teaConfig = {
            green: { temp: 80, time: 120, video: '../images/tea_art/ç»¿èŒ¶.mp4', color: 'rgba(155, 187, 89, 0.8)' },
            oolong: { temp: 95, time: 180, video: '../images/tea_art/ä¹Œé¾™.mp4', color: 'rgba(212, 165, 94, 0.8)' },
            black: { temp: 90, time: 240, video: '../images/tea_art/çº¢èŒ¶.mp4', color: 'rgba(140, 80, 66, 0.8)' }
        };

        let currentBrewing = null;
        let allowPouring = false;
        let isPouring = false;
        let lastPourTime = 0;
        let particleInterval = null;
        let initialPosition = { x: 0, y: 0 };

        const teapot = document.getElementById('teapot');
        const teacup = document.getElementById('teacup');
        const teaStream = document.getElementById('teaStream');

        // åˆå§‹åŒ–èŒ¶å£¶ä½ç½®
        function initTeapotPosition() {
            const rect = teapot.getBoundingClientRect();
            initialPosition = {
                x: rect.left - teapot.parentElement.getBoundingClientRect().left,
                y: rect.top - teapot.parentElement.getBoundingClientRect().top
            };
            teapot.dataset.x = 0;
            teapot.dataset.y = 0;
        }
        initTeapotPosition();

        interact('#teapot').draggable({
            inertia: {
                resistance: 5,
                minSpeed: 50,
                endSpeed: 10
            },
            modifiers: [
                interact.modifiers.restrictRect({
                    restriction: 'parent',
                    endOnly: true
                })
            ],
            autoScroll: true,
            listeners: {
                start: (event) => {
                    event.target.style.transition = 'none';
                    event.target.style.cursor = 'grabbing';
                },
                move: dragMoveListener,
                end: (event) => {
                    event.target.style.cursor = 'grab';
                    event.target.style.transition = 'transform 0.2s ease-out';
                    handleDragEnd(event);
                }
            }
        });

        function dragMoveListener(event) {
            const target = event.target;
            const x = (parseFloat(target.dataset.x) || 0) + event.dx;
            const y = (parseFloat(target.dataset.y) || 0) + event.dy;

            target.dataset.x = x;
            target.dataset.y = y;

            const currentRotation = target.dataset.rotation || 0;
            target.style.transform = `translate3d(${x}px, ${y}px, 0) rotate(${currentRotation}deg)`;
            
            requestAnimationFrame(() => {
                checkCollision();
                if (isPouring) {
                    updateTeaStream();
                    createTeaParticles();
                }
            });
        }

        function checkCollision() {
            if (!allowPouring || isPouring) return;

            const teapotRect = teapot.getBoundingClientRect();
            const teacupRect = teacup.getBoundingClientRect();

            const teapotSpout = {
                x: teapotRect.right - teapotRect.width * 0.25,
                y: teapotRect.bottom - teapotRect.height * 0.4
            };

            const teacupTop = {
                x: teacupRect.left + teacupRect.width / 2,
                y: teacupRect.top
            };

            const distance = Math.hypot(
                teapotSpout.x - teacupTop.x,
                teapotSpout.y - teacupTop.y
            );

            if (distance < 130 && !isPouring) {
                startPouring();
            }
        }

        function startPouring() {
            if (Date.now() - lastPourTime < 500) return;
            
            isPouring = true;
            lastPourTime = Date.now();

            const x = parseFloat(teapot.dataset.x) || 0;
            const y = parseFloat(teapot.dataset.y) || 0;

            teapot.style.transition = 'transform 0.6s cubic-bezier(0.4, 0, 0.2, 1)';
            teapot.style.transform = `translate3d(${x}px, ${y}px, 0) rotate(-45deg)`;
            teapot.dataset.rotation = -45;

            teaStream.style.opacity = '1';
            updateTeaStream();
            
            particleInterval = setInterval(createTeaParticles, 50);
            createRippleEffect();

            setTimeout(stopPouring, 3000);
        }

        function stopPouring() {
            isPouring = false;
            
            // æ·»åŠ å¤ä½åŠ¨ç”»
            teapot.classList.add('resetting');
            teapot.style.transition = 'transform 0.8s cubic-bezier(0.4, 0, 0.2, 1)';
            teapot.style.transform = `translate3d(0, 0, 0) rotate(0deg)`;
            teapot.dataset.x = 0;
            teapot.dataset.y = 0;
            teapot.dataset.rotation = 0;

            // é‡ç½®çŠ¶æ€
            setTimeout(() => {
                teapot.style.transition = 'transform 0.2s ease-out';
                teapot.classList.remove('resetting');
                teaStream.style.opacity = '0';
            }, 800);

            clearInterval(particleInterval);
        }

        function createTeaParticles() {
            const teacupRect = teacup.getBoundingClientRect();
            const particle = document.createElement('div');
            particle.className = 'tea-particle';
            
            const startX = teacupRect.left + teacupRect.width / 2;
            const startY = teacupRect.top;
            
            particle.style.left = `${startX}px`;
            particle.style.top = `${startY}px`;
            
            const angle = Math.random() * Math.PI * 2;
            const distance = Math.random() * 30 + 10;
            const tx = Math.cos(angle) * distance;
            const ty = Math.sin(angle) * distance + 20;
            
            particle.style.setProperty('--tx', `${tx}px`);
            particle.style.setProperty('--ty', `${ty}px`);
            
            particle.style.animation = 'particleAnimation 0.8s ease-out forwards';
            document.body.appendChild(particle);
            
            particle.addEventListener('animationend', () => {
                particle.remove();
            });
        }

        function updateTeaStream() {
            if (!isPouring) return;

            const teapotRect = teapot.getBoundingClientRect();
            const teacupRect = teacup.getBoundingClientRect();

            const startX = teapotRect.right - teapotRect.width * 0.25;
            const startY = teapotRect.bottom - teapotRect.height * 0.4;
            const endX = teacupRect.left + teacupRect.width / 2;
            const endY = teacupRect.top + 10;

            const angle = Math.atan2(endY - startY, endX - startX);
            const length = Math.hypot(endX - startX, endY - startY);

            teaStream.style.height = `${length}px`;
            teaStream.style.left = `${startX}px`;
            teaStream.style.top = `${startY}px`;
            teaStream.style.transform = `rotate(${angle}rad)`;
        }

        function createRippleEffect() {
            if (!isPouring) return;

            const teacupRect = teacup.getBoundingClientRect();
            const ripple = document.createElement('div');
            ripple.className = 'ripple';
            
            const size = 20;
            ripple.style.width = `${size}px`;
            ripple.style.height = `${size}px`;
            ripple.style.left = `${teacupRect.left + teacupRect.width / 2 - size / 2}px`;
            ripple.style.top = `${teacupRect.top + 10 - size / 2}px`;

            document.body.appendChild(ripple);
            ripple.addEventListener('animationend', () => ripple.remove());

            if (isPouring) {
                setTimeout(() => createRippleEffect(), 200);
            }
        }

        function handleDragEnd(event) {
            if(!isPouring) {
                const target = event.target;
                const currentRotation = target.dataset.rotation || 0;
                target.style.transform = `translate3d(${target.dataset.x}px, ${target.dataset.y}px, 0) rotate(${currentRotation}deg)`;
            }
        }

        document.getElementById('teaType').addEventListener('change', function() {
            setupBrewingProcess(this.value);
        });

        function setupBrewingProcess(teaType) {
            if (currentBrewing) clearInterval(currentBrewing);
            allowPouring = false;
            isPouring = false;
            
            const config = teaConfig[teaType];
            document.getElementById('teaVideo').src = config.video;
            startTimer(config.time);
        }

        function startTimer(seconds) {
            let remaining = seconds;
            document.querySelector('.timer-progress').style.width = '0%';
            
            currentBrewing = setInterval(() => {
                remaining--;
                const progress = (1 - remaining / seconds) * 100;
                document.querySelector('.timer-progress').style.width = `${progress}%`;
                
                const mins = Math.floor(remaining / 60);
                const secs = remaining % 60;
                document.querySelector('.timer-text').textContent = 
                    `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;

                if (remaining <= 0) {
                    clearInterval(currentBrewing);
                    allowPouring = true;
                    document.querySelector('.timer-text').textContent = "å‡†å¤‡å€’èŒ¶";
                }
            }, 1000);
        }

        setupBrewingProcess('green');

        const teaQuiz = [
    // äº•å†ˆç¿ ç»¿æ ¸å¿ƒå†²æ³¡ï¼ˆ12é¢˜ï¼‰
    {
        question: "äº•å†ˆç¿ ç»¿ç‰¹çº§èŒ¶æœ€ä½³å†²æ³¡æ°´æ¸©ï¼Ÿ",
        options: ["75-80â„ƒ", "85-90â„ƒ", "95-100â„ƒ", "å†·æ°´å†²æ³¡"],
        correct: 0,
        explain: "å®éªŒæ•°æ®ï¼š80â„ƒæ°´æ¸©èŒ¶æ°¨é…¸æµ¸å‡ºç‡æ¯”100â„ƒé«˜23%"
    },
    {
        question: "å…¶ç‰¹è‰²'ä¸­æŠ•æ³•'çš„æ­£ç¡®æ­¥éª¤æ˜¯ï¼Ÿ",
        options: ["æ°´â†’èŒ¶â†’æ°´", "èŒ¶â†’æ°´â†’èŒ¶", "åŠæ°´â†’èŒ¶â†’æ»¡æ°´", "èŒ¶â†’åŠæ°´â†’æ»¡æ°´"],
        correct: 2,
        explain: "å…ˆæ³¨1/3æ°´ï¼ŒæŠ•èŒ¶åå†æ³¨è‡³ä¸ƒåˆ†æ»¡"
    },
    {
        question: "ç»ç’ƒæ¯å†²æ³¡æ—¶æ³¨æ°´è§’åº¦å»ºè®®ï¼Ÿ",
        options: ["45Â°æ²¿å£æ³¨æ°´", "90Â°å®šç‚¹é«˜å†²", "30Â°èºæ—‹æ³¨æ°´", "60Â°ä¸­å¿ƒæ³¨æ°´"],
        correct: 0,
        explain: "45Â°è§’å½¢æˆæ¶¡æµåŠ é€ŸèŒ¶å¶èˆ’å±•"
    },
    {
        question: "æœ€ä½³èŒ¶æ°´æ¯”ä¾‹ï¼ˆä½“ç§¯æ¯”ï¼‰ï¼Ÿ",
        options: ["1:50", "1:30", "1:75", "1:100"],
        correct: 1,
        explain: "3gèŒ¶ï¼ˆçº¦é“ºæ»¡æ¯åº•ï¼‰é…150mlæ°´æ•ˆæœæœ€ä½³"
    },
    {
        question: "é¦–æ³¡æœ€ä½³æµ¸æ³¡æ—¶é—´ï¼Ÿ",
        options: ["30ç§’", "90ç§’", "150ç§’", "180ç§’"],
        correct: 1,
        explain: "ç”µå­æ˜¾å¾®é•œè§‚å¯Ÿæ˜¾ç¤º90ç§’ç»†èƒå£å®Œå…¨èˆ’å±•"
    },
    {
        question: "ç¬¬äºŒæ³¡åº”å¦‚ä½•è°ƒæ•´ï¼Ÿ",
        options: ["æ°´æ¸©+5â„ƒ", "æ—¶é—´+30ç§’", "æ³¨æ°´é«˜åº¦+10cm", "æ°´é‡å‡åŠ"],
        correct: 0,
        explain: "æå‡æ°´æ¸©è‡³85â„ƒæ¿€å‘æ·±å±‚ç‰©è´¨"
    },

    // å…¶ä»–èŒ¶ç±»å¯¹ç…§ï¼ˆ6é¢˜ï¼‰
    {
        question: "ä¸‹åˆ—å“ªé¡¹æ˜¯æ™®æ´±èŒ¶ç‰¹æœ‰å†²æ³¡è¦æ±‚ï¼Ÿ",
        options: ["å¿«é€Ÿå‡ºæ±¤", "æ²¸æ°´æ´—èŒ¶", "ç•™æ ¹æ³¡æ³•", "å†°æ°´é†’èŒ¶"],
        correct: 1,
        explain: "éœ€ç”¨100â„ƒæ²¸æ°´å¿«é€Ÿæ´—èŒ¶2æ¬¡ï¼ˆï¼œ5ç§’/æ¬¡ï¼‰"
    },
    {
        question: "æ­¦å¤·å²©èŒ¶å†²æ³¡æ ¸å¿ƒè¦ç´ ï¼Ÿ",
        options: ["é«˜æ°´æ¸©/å¿«å‡ºæ±¤", "ä½æ°´æ¸©/æ…¢æµ¸æ³¡", "é—´éš”æ‘‡é¦™", "å¤šæ¬¡æ´—èŒ¶"],
        correct: 0,
        explain: "100â„ƒæ²¸æ°´+8ç§’å¿«å‡ºï¼Œæ¿€å‘å²©éª¨èŠ±é¦™"
    },
    {
        question: "ç¢§èºæ˜¥ä¸äº•å†ˆç¿ ç»¿å†²æ³¡å·®å¼‚ä¸»è¦åœ¨ï¼Ÿ",
        options: ["æŠ•èŒ¶é¡ºåº", "æ³¨æ°´åŠ›åº¦", "å™¨å…·æè´¨", "ç¯å¢ƒæ¹¿åº¦"],
        correct: 0,
        explain: "ç¢§èºæ˜¥éœ€ä¸ŠæŠ•æ³•ï¼ˆå…ˆæ°´åèŒ¶ï¼‰ä¿æŠ¤èŒ¶æ¯«"
    },

    // æ··åˆé¢˜å‹ï¼ˆ7é¢˜ï¼‰
    {
        question: "å“ªç§æƒ…å†µéœ€ç‰¹åˆ«æ³¨æ„æ°´æ¸©æ§åˆ¶ï¼Ÿ",
        options: ["è€ä¸›æ°´ä»™", "é™ˆå¹´æ™®æ´±", "æ˜å‰ç¿ ç»¿", "èŒ‰è‰èŠ±èŒ¶"],
        correct: 2,
        explain: "å«©èŠ½ç»¿èŒ¶å¯¹æ°´æ¸©æ•æ„Ÿï¼Œè¯¯å·®Â±3â„ƒå³å½±å“å£æ„Ÿ"
    },
    {
        question: "è¯„å®¡å†²æ³¡æ—¶ï¼Œä¸é¾™äº•æ“ä½œç›¸åŒçš„æ˜¯ï¼Ÿ",
        options: ["3gèŒ¶/150ml", "5åˆ†é’Ÿæµ¸æ³¡", "ç“·ç¢—å†²æ³¡", "ä¸‰æ¬¡è¿‡æ»¤"],
        correct: 0,
        explain: "GB/T 23776è§„å®šç»¿èŒ¶è¯„å®¡é€šç”¨æ ‡å‡†"
    }
];
        class TeaQuiz {
    constructor() {
        this.questions = [...teaQuiz];
        this.currentQ = null;
        this.score = 0;
        this.streak = 0;
        
        this.init();
    }

    init() {
        this.shuffleQuestions();
        this.updateScore();
        this.showNextQuestion();
        this.setupEventListeners();
    }

    shuffleQuestions() {
        this.questions = this.questions
            .sort(() => Math.random() - 0.5)
            .slice(0, 10);
    }

    startTimer() {
        this.timer = setInterval(() => {
            this.timeLeft--;
            document.querySelector('.timer').textContent = this.timeLeft;
            if(this.timeLeft <= 0) this.endGame();
        }, 1000);
    }

    showNextQuestion() {
        if(this.questions.length === 0) return this.endGame();
        
        this.currentQ = this.questions.pop();
        this.renderQuestion();
        this.updateProgress();
    }

    renderQuestion() {
        const q = this.currentQ;
        document.querySelector('.question-text').textContent = q.question;
        
        const optionsGrid = document.querySelector('.options-grid');
        optionsGrid.innerHTML = q.options.map((opt, i) => `
            <button class="option-btn" data-index="${i}">${opt}</button>
        `).join('');
    }

    handleAnswer(selectedIndex) {
        const isCorrect = selectedIndex === this.currentQ.correct;
        const options = document.querySelectorAll('.option-btn');
        
        options.forEach(btn => {
            btn.disabled = true;
            if(btn.dataset.index == this.currentQ.correct) {
                btn.classList.add('correct');
            }
            if(btn.dataset.index == selectedIndex && !isCorrect) {
                btn.classList.add('wrong');
            }
        });

        if(isCorrect) {
            // æ–°è®¡åˆ†è§„åˆ™ï¼šåŸºç¡€åˆ†8åˆ† + è¿å¯¹å¥–åŠ±2åˆ†
            this.score += 8 + Math.min(this.streak, 2)*2;
            this.streak++;
        } else {
            this.streak = 0;
        }

        this.updateScore();
        setTimeout(() => this.showNextQuestion(), 1500);
    }

    updateProgress() {
        const progress = (1 - this.questions.length / 10) * 100;
        document.querySelector('.progress-bar').style.width = `${progress}%`;
    }

    updateScore() {
        document.querySelector('.current-score').textContent = this.score;
        document.querySelector('.streak-count').textContent = `${this.streak} è¿å¯¹`;
    }

    endGame() {
        document.querySelector('.question-card').classList.add('hidden');
        document.querySelector('.result-card').classList.remove('hidden');
        document.querySelector('.final-score').textContent = this.score;
    }

    setupEventListeners() {
        document.querySelector('.options-grid').addEventListener('click', e => {
            if(e.target.classList.contains('option-btn')) {
                this.handleAnswer(parseInt(e.target.dataset.index));
            }
        });

        document.querySelector('.restart-btn').addEventListener('click', () => {
            location.reload();
        });
    }
}

    // åˆå§‹åŒ–æ¸¸æˆ
    new TeaQuiz();
    </script>
</body>
</html>