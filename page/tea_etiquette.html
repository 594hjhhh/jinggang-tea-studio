<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>èŒ¶é“ç¤¼ä»ªæ–‡åŒ–</title>
    <link rel="stylesheet" href="../css/common.css">
    <style>
        /* åŸºç¡€æ ·å¼é‡ç½® */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'å®‹ä½“', 'SimSun', serif;
            background-color: #f5f0eb;
            color: #4a4a4a;
            line-height: 1.6;
            background: url('../images/tea_etiquette/bg1.jpg');
        }

       /* å¯¼èˆªæ æ•´ä½“æ ·å¼ */
.tea-navbar {
    background: rgba(255,253,248,0.98);
    box-shadow: 0 4px 20px rgba(61,84,56,0.08);
    position: fixed;
    width: 100%;
    top: 0;
    z-index: 1000;
    backdrop-filter: blur(6px);
}

.nav-container {
    max-width: 1280px;
    margin: 0 auto;
    padding: 0 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 64px;
}

/* å“ç‰Œæ ‡è¯†è®¾è®¡ */
.nav-brand {
    display: flex;
    align-items: center;
    gap: 0.8rem;
    text-decoration: none;
    transition: opacity 0.3s ease;
}

.tea-logo {
    width: 40px;
    height: 40px;
    opacity: 0.9;
}

.brand-text {
    display: flex;
    flex-direction: column;
    line-height: 1.2;
}

.main-title {
    font-family: 'éš¶ä¹¦', cursive;
    color: #3d5438;
    font-size: 1.4rem;
    letter-spacing: 2px;
}

.sub-title {
    font-family: 'æ¥·ä½“', cursive;
    color: #c5a173;
    font-size: 0.7rem;
    letter-spacing: 1px;
}

/* å¯¼èˆªèœå•é¡¹æ ·å¼ */
.nav-menu {
    display: flex;
    gap: 2rem;
    position: relative;
}

.nav-item {
    display: flex;
    align-items: center;
    padding: 0.5rem 1rem;
    font-family: 'å®‹ä½“', serif;
    color: #666;
    text-decoration: none;
    position: relative;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.nav-icon {
    width: 18px;
    height: 18px;
    margin-right: 0.5rem;
    fill: none;
    stroke: currentColor;
    stroke-width: 2;
    stroke-linecap: round;
    stroke-linejoin: round;
}

.nav-item::after {
    content: '';
    position: absolute;
    bottom: -4px;
    left: 50%;
    width: 0;
    height: 2px;
    background: #c5a173;
    transition: all 0.3s ease;
}

.nav-item:hover {
    color: #3d5438;
}

.nav-item:hover::after {
    left: 0;
    width: 100%;
}

/* æµåŠ¨è£…é¥°çº¿ */
.nav-divider {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 2px;
    overflow: hidden;
}

.flow-line {
    height: 100%;
    background: linear-gradient(90deg, 
        transparent 0%, 
        #c5a173 30%, 
        #3d5438 70%, 
        transparent 100%
    );
    animation: flow 8s linear infinite;
    opacity: 0.3;
}

@keyframes flow {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

/* ç§»åŠ¨ç«¯é€‚é… */
@media (max-width: 768px) {
    .nav-menu {
        position: fixed;
        top: 64px;
        left: -100%;
        width: 100%;
        height: calc(100vh - 64px);
        background: rgba(255,255,255,0.98);
        flex-direction: column;
        padding: 2rem;
        transition: left 0.3s ease;
    }

    .nav-menu.active {
        left: 0;
    }

    .nav-item {
        padding: 1rem;
        border-bottom: 1px solid rgba(61,84,56,0.1);
    }

    .nav-toggle {
        display: block;
        background: none;
        border: none;
        padding: 0.5rem;
        cursor: pointer;
    }

    .toggle-bar {
        display: block;
        width: 24px;
        height: 2px;
        background: #3d5438;
        margin: 4px 0;
        transition: all 0.3s ease;
    }

    .nav-toggle.active .toggle-bar:nth-child(1) {
        transform: translateY(6px) rotate(45deg);
    }

    .nav-toggle.active .toggle-bar:nth-child(2) {
        opacity: 0;
    }

    .nav-toggle.active .toggle-bar:nth-child(3) {
        transform: translateY(-6px) rotate(-45deg);
    }
}

/* æ¡Œé¢ç«¯æ‚¬åœç‰¹æ•ˆ */
@media (hover: hover) {
    .nav-brand:hover .tea-logo {
        animation: leaf-float 1.2s ease-in-out infinite;
    }

    .nav-item:hover .nav-icon {
        animation: icon-bounce 0.6s ease;
    }
}

@keyframes leaf-float {
    0%, 100% { transform: translateY(0) rotate(0deg); }
    50% { transform: translateY(-3px) rotate(3deg); }
}

@keyframes icon-bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-3px); }
}

        /* ä¸»è¦å†…å®¹åŒº */
        .container {
            max-width: 1200px;
            margin: 3rem auto;
            padding: 0 2rem;
        }

        /* ç¤¼ä»ªå¡ç‰‡ */
        .etiquette-card {
            border-radius: 10px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .etiquette-card:hover {
            transform: translateY(-5px);
        }

        .card-title {
            color: #3d5438;
            border-left: 4px solid #c5a173;
            padding-left: 1rem;
            margin-bottom: 1.5rem;
            font-size: 1.8rem;
        }

        /* èŒ¶å…·ç½‘æ ¼å¸ƒå±€ */
    .tea-tools-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 2rem;
        padding: 1.5rem 0;
    }

    .tool-item {
        background: #f3e6d1;
        border-radius: 8px;
        overflow: hidden;
        transition: transform 0.3s ease;
        text-align: center;
    }

    .tool-img-container {
        position: relative;
        overflow: hidden;
        height: 220px;
        background: #f8f5f1;
    }

    .tool-img {
        width: 80%;
        height: auto;
        margin: 20px auto;
        transition: transform 0.4s ease;
    }

    .tool-overlay {
        position: absolute;
        bottom: -100%;
        left: 0;
        width: 100%;
        background: rgba(61, 84, 56, 0.9);
        color: white;
        padding: 1rem;
        transition: bottom 0.3s ease;
    }

    .tool-item:hover .tool-overlay {
        bottom: 0;
    }

    .tool-item:hover .tool-img {
        transform: scale(1.05);
    }

    .tool-name {
        color: #3d5438;
        margin: 1rem 0 0.5rem;
        font-size: 1.2rem;
    }

    .tool-type {
        color: #c5a173;
        font-size: 0.9rem;
        padding-bottom: 1rem;
    }

    @media (max-width: 480px) {
        .tea-tools-grid {
            grid-template-columns: 1fr;
        }
        
        .tool-img-container {
            height: 180px;
        }
    }

        /* å¼¹çª—æ ·å¼ */
.tea-modal {
  display: none;
  position: fixed;
  z-index: 1001;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.7);
  backdrop-filter: blur(3px);
}

.modal-content {
  position: relative;
  background: white;
  margin: 2% auto;
  padding: 20px;
  width: 70%;
  max-width: 800px;
  border-radius: 10px;
  animation: modalSlide 0.3s ease-out;
  display: flex;
  gap: 30px;
}

@keyframes modalSlide {
  from {transform: translateY(-50px); opacity: 0;}
  to {transform: translateY(0); opacity: 1;}
}

.modal-close {
  position: absolute;
  right: 20px;
  top: 10px;
  font-size: 28px;
  cursor: pointer;
  color: #666;
  transition: color 0.3s;
}

.modal-close:hover {
  color: #3d5438;
}

.modal-left {
  flex: 1;
  min-width: 300px;
}

.modal-img {
  width: 100%;
  height: 400px;
  object-fit: contain;
  border-radius: 8px;
}

.modal-right {
  flex: 1;
  padding: 10px;
}

.modal-title {
  color: #3d5438;
  border-bottom: 2px solid #c5a173;
  padding-bottom: 10px;
  margin-bottom: 20px;
}

.modal-specs li {
  display: flex;
  justify-content: space-between;
  padding: 8px 0;
  border-bottom: 1px dotted #ddd;
}

.modal-specs li span:first-child {
  color: #666;
  min-width: 80px;
}

.modal-specs li span:last-child {
  color: #3d5438;
  text-align: right;
  max-width: 200px;
}



@media (max-width: 768px) {
  .modal-content {
    flex-direction: column;
    width: 90%;
    margin: 10% auto;
  }
  
  .modal-left {
    min-width: auto;
  }
  
  .modal-img {
    height: 250px;
  }
}


        /* æ—¶é—´è½´æ ·å¼ */
       /* æ—¶é—´è½´å¢å¼ºæ ·å¼ */
       .timeline {
    position: relative;
    padding: 2rem 0;
}

.timeline::before {
    content: '';
    position: absolute;
    left: 32px;
    top: 0;
    width: 2px;
    height: 100%;
    background: linear-gradient(to bottom, 
        #c5a173 0%, 
        rgba(197,161,115,0.3) 100%);
}

.timeline-step {
    position: relative;
    margin-left: 80px;
    padding: 25px 30px;
    border-radius: 12px;
    margin-bottom: 40px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.05);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.timeline-step:hover {
    transform: translateX(10px);
    box-shadow: 0 8px 30px rgba(61,84,56,0.1);
}

.step-icon {
    position: absolute;
    left: -56px;
    top: 20px;
    width: 48px;
    height: 48px;
    background: #fff;
    border: 2px solid #c5a173;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    color: #3d5438;
}

h3[data-number]::before {
    content: attr(data-number);
    position: absolute;
    left: -88px;
    top: 8px;
    font-family: 'æ¥·ä½“', cursive;
    color: #c5a173;
    font-size: 1.8rem;
}

.step-tip {
    padding: 8px 12px;
    margin-top: 12px;
    background: #f8f5f1;
    border-left: 3px solid #c5a173;
    color: #666;
    font-size: 0.9em;
}

/* åŠ¨ç”»æ•ˆæœ */
.animate-slide {
    opacity: 0;
    transform: translateX(-20px);
    animation: slideIn 0.6s ease forwards;
}

@keyframes slideIn {
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

.steps-progress {
  position: fixed;
  right: 40px;
  top: 50%;
  transform: translateY(-50%);
  z-index: 500;
}

.progress-ring {
  position: relative;
  margin-bottom: 2rem;
}

.ring-bg {
  stroke: #f5f0eb;
  stroke-width: 4;
  fill: none;
}

.ring-fill {
  stroke: #c5a173;
  stroke-width: 4;
  fill: none;
  stroke-dasharray: 239;
  stroke-dashoffset: 239;
  transform: rotate(-90deg);
  transform-origin: center;
  transition: stroke-dashoffset 0.8s cubic-bezier(0.33,1,0.68,1);
}

.current-step {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-family: 'æ¥·ä½“';
  color: #3d5438;
  font-size: 1.8rem;
}

.step-dots {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1.2rem;
}

.step-dot {
  width: 14px;
  height: 14px;
  border: 2px solid #c5a173;
  border-radius: 50%;
  transition: all 0.4s ease;
  cursor: pointer;
}

.step-dot.active {
  background: #3d5438;
  transform: scale(1.4);
  border-color: transparent;
}

@media (max-width: 768px) {
  .steps-progress {
    right: 20px;
  }
  
  .step-dot {
    width: 12px;
    height: 12px;
  }
}

/* æ‰‹åŠ¿åŠ¨ç”»å®¹å™¨ */
.gesture-canvas {
  position: fixed;
  top: 50%;
  left: 50%;
  width: 40vw;
  height: 60vh;
  transform: translate(-50%, -50%);
  pointer-events: none;
  z-index: 200;
}

.motion-path {
  stroke: rgba(197,161,115,0.3);
  stroke-width: 2;
  fill: none;
  stroke-dasharray: 5 3;
}

.motion-cursor {
  position: absolute;
  width: 24px;
  height: 24px;
  transition: transform 0.6s ease-out;
}

.tea-drop {
  width: 100%;
  height: 100%;
  animation: drop-float 2s infinite ease-in-out;
}

@keyframes drop-float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
}

/* æ­¥éª¤æ¿€æ´»æ—¶çš„è·¯å¾„é«˜äº® */
.motion-path.active {
  stroke: #c5a173;
  animation: path-glow 1.5s ease-in-out infinite;
}

@keyframes path-glow {
  0%, 100% { stroke-opacity: 0.3; }
  50% { stroke-opacity: 0.8; }
}

/* å“åº”å¼ä¼˜åŒ– */
@media (max-width: 768px) {
    .timeline::before {
        left: 20px;
    }
    
    .timeline-step {
        margin-left: 60px;
        padding: 20px;
    }
    
    .step-icon {
        left: -44px;
        width: 40px;
        height: 40px;
        font-size: 20px;
    }
    
    h3[data-number]::before {
        left: -70px;
        font-size: 1.4rem;
    }
}


/* ç¤¼ä»ªè§„èŒƒæ¨¡å—æ ·å¼ */
.etiquette-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    padding: 1.5rem 0;
}

.etiquette-item {
    background-image: url('../images/tea_etiquette/card-bg.jpg');
    border-radius: 12px;
    padding: 1.5rem;
    display: flex;
    transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
    box-shadow: 0 4px 12px rgba(61,84,56,0.08);
}

.etiquette-item:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(61,84,56,0.12);
}

.etiquette-icon {
    flex: 0 0 60px;
    margin-right: 1.5rem;
}

.tea-wave, .hand-icon {
    width: 100%;
    height: 60px;
    stroke-width: 1.5;
}

.etiquette-content h3 {
    color: #3d5438;
    font-family: 'æ¥·ä½“', cursive;
    font-size: 1.4rem;
    margin-bottom: 0.5rem;
}

.etiquette-subtitle {
    display: block;
    color: #c5a173;
    font-size: 0.9em;
    margin-top: 0.2rem;
}

.etiquette-detail {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.6s ease;
}

.etiquette-item:hover .etiquette-detail {
    max-height: 200px;
}

.highlight {
    color: #3d5438;
    font-weight: 500;
    padding: 0.1em 0.3em;
    background: rgba(197,161,115,0.1);
    border-radius: 4px;
}

/* æ–°å¢å›¾æ ‡åŠ¨ç”» */
.setup-icon {
    animation: arrange-flow 6s linear infinite;
}

@keyframes arrange-flow {
    0% { transform: rotate(0deg); }
    25% { transform: rotate(3deg); }
    75% { transform: rotate(-3deg); }
    100% { transform: rotate(0deg); }
}

.taboo-icon {
    stroke-dasharray: 160;
    animation: taboo-glow 2s ease-in-out infinite;
}

@keyframes taboo-glow {
    50% { stroke-dashoffset: 80; }
}

/* å“èŒ—å§¿åŠ¿é¢„è§ˆ */
.posture-preview {
    width: 120px;
    height: 80px;
    background: 
        radial-gradient(circle at 30% 50%, #FFEBD6 25%, transparent),
        linear-gradient(to right, #f5f0eb, #fff);
    border-radius: 8px;
    position: relative;
}

.posture-preview::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 30%;
    width: 40px;
    height: 40px;
    background: url('gesture-preview.png') center/contain;
    filter: drop-shadow(2px 2px 4px rgba(61,84,56,0.1));
}

/* ç¦å¿Œåˆ—è¡¨æ ·å¼ */
.taboo-list li {
    position: relative;
    padding-left: 1.5em;
    transition: transform 0.3s ease;
}



.taboo-list li:hover {
    transform: translateX(8px);
}
.order-icon {
    animation: order-pulse 2s ease-in-out infinite;
}

@keyframes order-pulse {
    50% { transform: rotate(10deg); }
}

.receive-icon path {
    stroke-dasharray: 100;
    animation: dash-flow 3s linear infinite;
}

@keyframes dash-flow {
    to { stroke-dashoffset: 200; }
}

/* å¥‰èŒ¶é¡ºåºåŠ¨ç”» */
.order-animation {
    display: flex;
    gap: 1rem;
    margin-top: 1rem;
}

.person-icon {
    font-size: 1.8rem;
    animation: person-bob 2s ease-in-out infinite;
}

@keyframes person-bob {
    50% { transform: translateY(-5px); }
}

/* å©æŒ‡åŠ¨ç”» */
.knock-animation {
    width: 40px;
    height: 40px;
    background: rgba(197,161,115,0.1);
    border-radius: 50%;
    position: relative;
}

.knock-animation::after {
    content: '';
    position: absolute;
    width: 8px;
    height: 8px;
    background: #c5a173;
    border-radius: 50%;
    animation: knock-wave 1s infinite;
}

@keyframes knock-wave {
    0% { transform: scale(0); opacity: 1; }
    100% { transform: scale(2); opacity: 0; }
}

/* è°¢èŒ¶æ­¥éª¤ç¼–å· */
.etiquette-detail p {
    position: relative;
    padding-left: 1.5em;
}

.etiquette-detail p::before {
    content: attr(data-step);
    position: absolute;
    left: 0;
    color: #c5a173;
    font-family: 'æ¥·ä½“';
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
    .etiquette-item {
        flex-direction: column;
        align-items: center;
        text-align: center;
    }
    
    .etiquette-icon {
        margin-right: 0;
        margin-bottom: 1rem;
    }
}

.gif{
    position: absolute;
    right: 100px;
    bottom: 30px;
}
img{
    width: 200px;
}
    </style>
</head>
<body>
    <nav class="tea-navbar">
        <div class="nav-container">
            <!-- Logo åŒºåŸŸå¢å¼º -->
            <a href="#" class="nav-brand">
                <svg class="tea-logo" viewBox="0 0 64 64">
                    <path d="M32 12L50 28v24H14V28L32 12" fill="none" stroke="#3d5438" stroke-width="2"/>
                    <path d="M24 40l8-8 8 8" stroke="#c5a173" stroke-width="2" fill="none"/>
                    <circle cx="32" cy="48" r="4" fill="#3d5438"/>
                </svg>
                <span class="brand-text">
                    <span class="main-title" style="font-family: m1Font">ç»¿ç¤¼æ‰¿èŠ³</span>
                    <span class="sub-title"  style="font-family: m1Font"> èŒ¶é“ç¤¼ä»ª</span>
                </span>
            </a>
    
            <!-- å¯¼èˆªèœå•å¢å¼º -->
            <div class="nav-menu">
                <a href="#tools" class="nav-item">
                    <svg class="nav-icon" viewBox="0 0 24 24"><path d="M12 2L3 7v10l9 5 9-5V7l-9-5zm0 16.5l-6-3.3v-6.4l6 3.3v6.4z"/></svg>
                    èŒ¶å…·é‰´è¯†
                </a>
                <a href="#steps" class="nav-item">
                    <svg class="nav-icon" viewBox="0 0 24 24"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm0 18c-4.4 0-8-3.6-8-8s3.6-8 8-8 8 3.6 8 8-3.6 8-8 8zM12 7l-5 5h4v4h2v-4h4l-5-5z"/></svg>
                    å†²æ³¡ä¸ƒç¤º
                </a>
                <a href="#tips" class="nav-item">
                    <svg class="nav-icon" viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.5 3.8 10.7 9 12 5.2-1.3 9-6.5 9-12V5l-9-4zm3 13h-2v6h-2v-6H9v-2h6v2z"/></svg>
                    ç¤¼æ³•ç²¾è¦
                </a>
            </div>
    
            <!-- ç§»åŠ¨ç«¯èœå•åˆ‡æ¢ -->
            <button class="nav-toggle">
                <span class="toggle-bar"></span>
                <span class="toggle-bar"></span>
                <span class="toggle-bar"></span>
            </button>
        </div>
    
        <!-- æµåŠ¨è£…é¥°çº¿ -->
        <div class="nav-divider">
            <div class="flow-line"></div>
        </div>
    </nav>
    

    <main class="container">
        <section class="etiquette-card" id="tools">
            <h2 class="card-title">èŒ¶å…·è®¤çŸ¥</h2>
            <div class="tea-tools-grid">
                <!-- ç´«ç ‚å£¶ -->
                <div class="tool-item" 
                     data-details='{
                       "material": "ç´«ç ‚æ³¥æ–™",
                       "capacity": "200ml",
                       "size": "12cmÃ—8cm",
                       "weight": "350g",
                       "brew": "æ™®æ´±ã€çº¢èŒ¶",
                       "feature": "åŒé‡æ°”å­”ç»“æ„ï¼Œé€æ°”ä¸é€æ°´"
                     }'>
                    <div class="tool-img-container">
                        <img src="../images/tea_etiquette/ç´«ç ‚å£¶.jfif" alt="ç´«ç ‚å£¶" class="tool-img">
                        <div class="tool-overlay">
                            <span class="tool-desc">æ³¥æ–™é€æ°”æ€§å¥½ï¼Œé€‚åˆå†²æ³¡å‘é…µèŒ¶</span>
                        </div>
                    </div>
                    <h3 class="tool-name">ç´«ç ‚å£¶</h3>
                    <p class="tool-type">ä¸»æ³¡å™¨å…·</p>
                </div>
            
                <!-- å“èŒ—æ¯ -->
                <div class="tool-item" 
                     data-details='{
                       "material": "æ™¯å¾·é•‡ç™½ç“·",
                       "capacity": "30ml",
                       "size": "Î¦5cmÃ—3cm",
                       "weight": "60g",
                       "brew": "æ‰€æœ‰èŒ¶ç±»",
                       "feature": "é‡‰é¢å…‰æ»‘ä¸å¸å‘³"
                     }'>
                    <div class="tool-img-container">
                        <img src="../images/tea_etiquette/å“èŒ—æ¯.jpg" alt="å“èŒ—æ¯" class="tool-img">
                        <div class="tool-overlay">
                            <span class="tool-desc">ç™½ç“·æ˜¾èŒ¶è‰²ï¼Œé—»é¦™è§‚æ±¤ä¸¤ç›¸å®œ</span>
                        </div>
                    </div>
                    <h3 class="tool-name">å“èŒ—æ¯</h3>
                    <p class="tool-type">å“é¥®å™¨å…·</p>
                </div>
            
                <!-- èŒ¶é“å…­å›å­ -->
                <div class="tool-item" 
                     data-details='{
                       "material": "ç«¹æœ¨/é‡‘å±",
                       "components": "èŒ¶åˆ™ã€èŒ¶é’ˆã€èŒ¶æ¼ã€èŒ¶å¤¹ã€èŒ¶åŒ™ã€èŒ¶ç­’",
                       "size": "èŒ¶ç­’18cm",
                       "weight": "200g",
                       "feature": "èŒ¶äº‹æ“ä½œå…­ä»¶å¥—"
                     }'>
                    <div class="tool-img-container">
                        <img src="../images/tea_etiquette/èŒ¶é“å…­å›å­.jpg" alt="èŒ¶é“å…­å›å­" class="tool-img">
                        <div class="tool-overlay">
                            <span class="tool-desc">èŒ¶äº‹å¿…å¤‡å·¥å…·å¥—è£…</span>
                        </div>
                    </div>
                    <h3 class="tool-name">èŒ¶é“å…­å›å­</h3>
                    <p class="tool-type">è¾…åŠ©å·¥å…·</p>
                </div>
            
                <!-- èŒ¶æµ·ï¼ˆå…¬é“æ¯ï¼‰ -->
                <div class="tool-item" 
                     data-details='{
                       "material": "ç»ç’ƒæè´¨",
                       "capacity": "300ml",
                       "size": "Î¦8cmÃ—10cm",
                       "weight": "180g",
                       "feature": "é¹°å˜´è®¾è®¡æ–¹ä¾¿æ§æµ"
                     }'>
                    <div class="tool-img-container">
                        <img src="../images/tea_etiquette/èŒ¶æµ·.jpg" alt="èŒ¶æµ·" class="tool-img">
                        <div class="tool-overlay">
                            <span class="tool-desc">å‡åŒ€èŒ¶æ±¤ï¼Œæ²‰æ·€èŒ¶æ¸£</span>
                        </div>
                    </div>
                    <h3 class="tool-name">èŒ¶æµ·</h3>
                    <p class="tool-type">åˆ†èŒ¶å™¨å…·</p>
                </div>
            
        </section>

        <section class="etiquette-card" id="steps">
            <h2 class="card-title">å†²æ³¡ä¸ƒå¼</h2>

            <div class="steps-progress">
                <div class="progress-ring">
                  <svg width="80" height="80">
                    <circle class="ring-bg" cx="40" cy="40" r="38"/>
                    <circle class="ring-fill" cx="40" cy="40" r="38"/>
                  </svg>
                  <div class="current-step">å£¹</div>
                </div>
                <div class="step-dots">
                  <div class="step-dot" data-step="1"></div>
                  <div class="step-dot" data-step="2"></div>
                  <div class="step-dot" data-step="3"></div>
                  <div class="step-dot" data-step="4"></div>
                  <div class="step-dot" data-step="5"></div>
                  <div class="step-dot" data-step="6"></div>
                  <div class="step-dot" data-step="7"></div>
                </div>
              </div>

            <div class="timeline">
                <!-- æ­¥éª¤1 -->
                <div class="timeline-step animate-slide">
                    <div class="step-icon">ğŸƒ</div>
                    <h3 data-number="å£¹">å¤‡èŒ¶èµå½¢</h3>
                    <p>å–èŒ¶ç½®äºèŒ¶è·ï¼Œå®¾ä¸»å…±èµå¹²èŒ¶å½¢æ€</p>
                    <div class="step-tip">æ¨èè§’åº¦ï¼š45åº¦æ–œæŒèŒ¶è·</div>
                </div>
        
                <!-- æ­¥éª¤2 -->
                <div class="timeline-step animate-slide">
                    <div class="step-icon">ğŸ”¥</div>
                    <h3 data-number="è´°">æ¸©æ¯æ´å…·</h3>
                    <p>æ²¸æ°´ä¾æ¬¡æ¸©çƒ«ç›–ç¢—â†’å…¬é“æ¯â†’å“èŒ—æ¯</p>
                    <div class="step-tip">æ¸©åº¦å»ºè®®ï¼š95â„ƒä»¥ä¸Šæ²¸æ°´</div>
                </div>
        
                <!-- æ­¥éª¤3 -->
                <div class="timeline-step animate-slide">
                    <div class="step-icon">â›°ï¸</div>
                    <h3 data-number="å">ä½³èŒ—å…¥å®«</h3>
                    <p>æŒ‰1:20èŒ¶æ°´æ¯”æŠ•èŒ¶ï¼Œè½»æ‘‡ç›–ç¢—é—»å¹²é¦™</p>
                    <div class="step-tip">ç»¿èŒ¶3å…‹/ä¹Œé¾™èŒ¶8å…‹</div>
                </div>
        
                <!-- æ­¥éª¤4 -->
                <div class="timeline-step animate-slide">
                    <div class="step-icon">ğŸŒŠ</div>
                    <h3 data-number="è‚†">æ¶¦èŒ¶é†’é¦™</h3>
                    <p>å¿«é€Ÿæ³¨æ°´å³å‡ºï¼Œæ¿€æ´»èŒ¶å¶å†…è´¨</p>
                    <div class="step-tip">é¦–æ³¡èŒ¶æ±¤å¯ç”¨äºçƒ«æ¯</div>
                </div>
        
                <!-- æ­¥éª¤5 -->
                <div class="timeline-step animate-slide">
                    <div class="step-icon">âŒ›</div>
                    <h3 data-number="ä¼">å‡¤å‡°ä¸‰ç‚¹å¤´</h3>
                    <p>é«˜å†²ä½æ–Ÿä¸‰æ¬¡ï¼Œæ°´çº¿è¿ç»µä¸æ–­</p>
                    <div class="step-tip">ç»¿èŒ¶æ³¨æ°´æ³•ï¼šæ°´ä½ä¸ƒåˆ†æ»¡</div>
                </div>
        
                <!-- æ­¥éª¤6 -->
                <div class="timeline-step animate-slide">
                    <div class="step-icon">ğŸµ</div>
                    <h3 data-number="é™†">ç‰æ¶²å›å£¶</h3>
                    <p>é™å€™10-30ç§’ï¼Œä¾èŒ¶ç±»æ§åˆ¶å‡ºæ±¤æ—¶é—´</p>
                    <div class="step-tip">æ™®æ´±ï¼š15ç§’ï¼Œç™½èŒ¶ï¼š20ç§’</div>
                </div>
        
                <!-- æ­¥éª¤7 -->
                <div class="timeline-step animate-slide">
                    <div class="step-icon">ğŸ™</div>
                    <h3 data-number="æŸ’">ç¤¼æ•¬å¥‰èŒ¶</h3>
                    <p>åŒæ‰‹æ‰˜æ¯æ²¿ï¼Œä¸¾æ¡ˆé½çœ‰æ•¬å®¾å®¢</p>
                    <div class="step-tip">æ¯æ‰˜æœå‘å®¢äººå³æ‰‹ä¾§</div>
                </div>
            </div>

            <!-- æ‰‹åŠ¿åŠ¨ç”»å®¹å™¨ -->
            <div class="gesture-canvas">
                <svg class="motion-paths">
                <!-- å„æ­¥éª¤é¢„å®šä¹‰è·¯å¾„ -->
                <path id="path-warm" class="motion-path" 
                        d="M20% 80 Q50% 20 80% 80" 
                        data-step="2"/>
                <path id="path-pour" class="motion-path"
                        d="M30% 30 C40% 0 60% 0 70% 30"
                        data-step="5"/>
                </svg>
                
                <!-- åŠ¨æ€æŒ‡é’ˆ -->
                <div class="motion-cursor">
                <svg class="tea-drop"><use href="#tea-drop-icon"></svg>
                </div>
            </div>
        </section>

        <section class="etiquette-card" id="tips">
            <h2 class="card-title">èŒ¶ç¤¼åè§„</h2>
            
            <div class="etiquette-grid">

                <!-- æ–ŸèŒ¶ç¤¼ä»ª -->
                <div class="etiquette-item" data-category="pour">
                    <div class="etiquette-icon">
                        <svg viewBox="0 0 64 64" class="tea-wave">
                            <path d="M16 44c12-8 24-6 32 2" stroke="#3d5438" fill="none"/>
                            <circle cx="32" cy="50" r="4" fill="#c5a173"/>
                        </svg>
                    </div>
                    <div class="etiquette-content">
                        <h3>æ–ŸèŒ¶ä¸ƒåˆ†æ»¡<span class="etiquette-subtitle">ä¸‰åˆ†äººæƒ…æš–</span></h3>
                        <div class="etiquette-detail">
                            <p>èŒ¶é‡æ ‡å‡†ï¼š<span class="highlight">70%å®¹é‡</span></p>
                            <p>æŒå£¶è§’åº¦ï¼š<span class="highlight">45åº¦æ–œå€¾</span></p>
                        </div>
                    </div>
                </div>
        
                <!-- å¥‰èŒ¶ç¤¼ä»ª -->
                <div class="etiquette-item" data-category="serve">
                    <div class="etiquette-icon">
                        <svg viewBox="0 0 64 64" class="hand-icon">
                            <path d="M24 40l8-6 6 8 8-12" stroke="#3d5438" fill="none"/>
                            <circle cx="40" cy="32" r="3" fill="#c5a173"/>
                        </svg>
                    </div>
                    <div class="etiquette-content">
                        <h3>ä¸¾æ¡ˆé½çœ‰<span class="etiquette-subtitle">ç¤¼æ•¬æ˜¾è¯šå¿ƒ</span></h3>
                        <div class="etiquette-detail">
                            <p>æ¯æ‰˜æœå‘ï¼š<span class="highlight">å®¢æ–¹å³æ‰‹ä¾§</span></p>
                            <p>å¥‰èŒ¶é«˜åº¦ï¼š<span class="highlight">ä¸è‚©åŒé½</span></p>
                        </div>
                    </div>
                </div>
        
                <!-- èŒ¶å…·æ‘†æ”¾è§„èŒƒ -->
                <div class="etiquette-item" data-category="arrangement">
                    <div class="etiquette-icon">
                        <svg class="setup-icon" viewBox="0 0 64 64">
                            <path d="M20 44L32 20 44 44" stroke="#3d5438" fill="none"/>
                            <circle cx="32" cy="50" r="6" fill="#c5a173"/>
                            <rect x="16" y="48" width="32" height="8" rx="2" fill="#FFEBD6"/>
                        </svg>
                    </div>
                    <div class="etiquette-content">
                        <h3>èŒ¶å™¨å®šä½<span class="etiquette-subtitle">é˜´é˜³æœ‰åº</span></h3>
                        <div class="etiquette-detail">
                            <p>ä¸»æ³¡å™¨ï¼š<span class="highlight">é’é¾™ä½ï¼ˆå·¦ï¼‰</span></p>
                            <p>å…¬é“æ¯ï¼š<span class="highlight">ç™½è™ä½ï¼ˆå³ï¼‰</span></p>
                            <p>èŒ¶é“ç»„ï¼š<span class="highlight">æœ±é›€ä½ï¼ˆå‰ï¼‰</span></p>
                        </div>
                    </div>
                </div>

                <!-- å“èŒ—å§¿åŠ¿è§„èŒƒ -->
                <div class="etiquette-item" data-category="posture">
                    <div class="etiquette-icon">
                        <svg class="posture-icon" viewBox="0 0 64 64">
                            <path d="M24 40Q30 28 40 32" stroke="#3d5438" fill="none"/>
                            <circle cx="32" cy="24" r="4" fill="#c5a173"/>
                            <path d="M28 48L36 48" stroke="#E8D0B5" stroke-width="2"/>
                        </svg>
                    </div>
                    <div class="etiquette-content">
                        <h3>ä¸‰é¾™æŠ¤é¼<span class="etiquette-subtitle">æŒæ¯ä¹‹é“</span></h3>
                        <div class="etiquette-detail">
                            <p>æ‹‡æŒ‡é£ŸæŒ‡æ¡æ¯æ²¿</p>
                            <p>ä¸­æŒ‡æ‰˜åº•<span class="highlight">è°“ä¹‹ä¸‰æ‰</span></p>
                        </div>
                    </div>
                </div>

                <!-- èŒ¶å¸­ç¦å¿Œ -->
                <div class="etiquette-item" data-category="taboo">
                    <div class="etiquette-icon">
                        <svg class="taboo-icon" viewBox="0 0 64 64">
                            <circle cx="32" cy="32" r="24" stroke="#3d5438" fill="none"/>
                            <path d="M20 20L44 44M44 20L20 44" stroke="#c5a173" stroke-width="3"/>
                        </svg>
                    </div>
                    <div class="etiquette-content">
                        <h3>äº”ä¸åŸåˆ™<span class="etiquette-subtitle">é¿å¿Œå®ˆç¤¼</span></h3>
                        <div class="etiquette-detail">
                            <ul class="taboo-list">
                                <li>âœ– å£¶å£å¯¹äºº</li>
                                <li>âœ– é€†æ—¶é’ˆæ–ŸèŒ¶</li>
                                <li>âœ– å•æ‰‹æŒæ¯</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- ç»­èŒ¶ç¤¼èŠ‚ -->
                <div class="etiquette-item" data-category="refill">
                    <div class="etiquette-icon">
                        <svg class="refill-icon" viewBox="0 0 64 64">
                            <path d="M24 40L40 24" stroke="#3d5438" stroke-width="2"/>
                            <circle cx="24" cy="40" r="4" fill="#c5a173"/>
                            <circle cx="40" cy="24" r="4" fill="#c5a173"/>
                        </svg>
                    </div>
                    <div class="etiquette-content">
                        <h3>å…ˆå®¢åä¸»<span class="etiquette-subtitle">ç»­èŒ¶ä¹‹åº</span></h3>
                        <div class="etiquette-detail">
                            <p>å°Šé•¿è€…ä¼˜å…ˆ</p>
                            <p>é¡ºæ—¶é’ˆæ–¹å‘<span class="highlight">ç”±å³åŠå·¦</span></p>
                        </div>
                    </div>
                </div>

                <!-- æ¸…æ´è§„èŒƒ -->
                <div class="etiquette-item" data-category="clean">
                    <div class="etiquette-icon">
                        <svg class="clean-icon" viewBox="0 0 64 64">
                            <path d="M28 36L36 28" stroke="#3d5438" stroke-width="2"/>
                            <circle cx="32" cy="32" r="8" fill="none" stroke="#c5a173"/>
                        </svg>
                    </div>
                    <div class="etiquette-content">
                        <h3>æ¶¤å™¨å‡€å¿ƒ<span class="etiquette-subtitle">æ´å…·ä¹‹é“</span></h3>
                        <div class="etiquette-detail">
                            <p>æ¸©æ¯é¡ºåºï¼š<span class="highlight">ç›–ç¢—â†’å…¬é“æ¯â†’å“èŒ—æ¯</span></p>
                            <p>æ¸…æ´æ‰‹æ³•ï¼š<span class="highlight">å†…æ—‹ä¸‰å‘¨</span></p>
                        </div>
                    </div>
                </div>

                <!-- å¥‰èŒ¶é¡ºåº -->
                <div class="etiquette-item" data-category="serve-order">
                    <div class="etiquette-icon">
                        <svg class="order-icon" viewBox="0 0 64 64">
                            <path d="M24 24L40 40M40 24L24 40" stroke="#3d5438" fill="none"/>
                            <circle cx="32" cy="32" r="8" stroke="#c5a173" fill="none"/>
                            <path d="M20 48L44 48" stroke="#E8D0B5" stroke-width="2"/>
                        </svg>
                    </div>
                    <div class="etiquette-content">
                        <h3>é•¿å¹¼æœ‰åº<span class="etiquette-subtitle">å¥‰èŒ¶ä¹‹åº</span></h3>
                        <div class="etiquette-detail">
                            <ol class="serve-order">
                                <li>å°Šé•¿è€…å…ˆ</li>
                                <li>å¥³å£«ä¼˜å…ˆ</li>
                                <li>é¡ºæ—¶é’ˆè½®è½¬</li>
                            </ol>
                        </div>
                    </div>
                </div>

                <!-- å—èŒ¶ç¤¼èŠ‚ -->
                <div class="etiquette-item" data-category="receive">
                    <div class="etiquette-icon">
                        <svg class="receive-icon" viewBox="0 0 64 64">
                            <path d="M24 32L32 24 40 32" stroke="#3d5438" fill="none"/>
                            <circle cx="32" cy="40" r="4" fill="#c5a173"/>
                            <rect x="28" y="44" width="8" height="12" rx="2" fill="#FFEBD6"/>
                        </svg>
                    </div>
                    <div class="etiquette-content">
                        <h3>å©æŒ‡è°¢èŒ¶<span class="etiquette-subtitle">å—èŒ¶ä¹‹ç¤¼</span></h3>
                        <div class="etiquette-detail">
                            <p>é•¿è¾ˆèµèŒ¶ï¼š<span class="highlight">äº”æŒ‡å¹¶æ‹¢è½»å©æ¡Œé¢ä¸‰ä¸‹</span></p>
                            <p>å¹³è¾ˆå—èŒ¶ï¼š<span class="highlight">é£Ÿä¸­äºŒæŒ‡æ›²å©ä¸¤æ¬¡</span></p>
                            <div class="knock-animation"></div>
                        </div>
                    </div>
                </div>

                <!-- è°¢èŒ¶ç¤¼ä»ª -->
                <div class="etiquette-item" data-category="thanks">
                    <div class="etiquette-icon">
                        <svg class="thanks-icon" viewBox="0 0 64 64">
                            <path d="M32 20L40 36 24 36" stroke="#c5a173" fill="none"/>
                            <circle cx="32" cy="44" r="8" stroke="#3d5438" fill="none"/>
                            <path d="M28 48L36 48" stroke="#E8D0B5" stroke-width="2"/>
                        </svg>
                    </div>
                    <div class="etiquette-content">
                        <h3>ä¸‰è½¬è°¢æ¯<span class="etiquette-subtitle">å“æ¯•ä¹‹ä»ª</span></h3>
                        <div class="etiquette-detail">
                            <p>1. æ¯åº•å‘ä¸»<span class="highlight">ç¤ºé¥®å°½</span></p>
                            <p>2. è½»æ—‹æ¯èº«<span class="highlight">èµå™¨å½¢</span></p>
                            <p>3. åŸå‘å¥‰è¿˜<span class="highlight">è¡¨è°¢æ„</span></p>
                        </div>
                    </div>
                </div>

                <div class="gif">
                    <img src="../images/tea_etiquette/æ‰‹ç»˜å¤é£èŒ¶é¥®.gif" alt="">
                </div>
        </section>

        <!-- å¼¹çª—ç»“æ„ -->
        <div class="tea-modal" id="detailModal">
        <div class="modal-content">
        <span class="modal-close">&times;</span>
        <div class="modal-left">
            <img src="" alt="èŒ¶å…·å¤§å›¾" class="modal-img">
        </div>
        <div class="modal-right">
            <h3 class="modal-title"></h3>
            <ul class="modal-specs"></ul>
        </div>
        </div>
        </div>
    </main>

    <script>
        // ç§»åŠ¨ç«¯èœå•åˆ‡æ¢
document.querySelector('.nav-toggle').addEventListener('click', function() {
    this.classList.toggle('active');
    document.querySelector('.nav-menu').classList.toggle('active');
});

// æ»šåŠ¨ç›‘å¬é«˜äº®å½“å‰ç« èŠ‚
window.addEventListener('scroll', () => {
    const sections = document.querySelectorAll('section');
    const navItems = document.querySelectorAll('.nav-item');
    let current = '';
    
    sections.forEach(section => {
        const sectionTop = section.offsetTop;
        if (pageYOffset >= sectionTop - 100) {
            current = section.getAttribute('id');
        }
    });

    navItems.forEach(item => {
        item.classList.remove('active');
        if (item.getAttribute('href').includes(current)) {
            item.classList.add('active');
        }
    });
});

// å¹³æ»‘æ»šåŠ¨
document.querySelectorAll('.nav-item').forEach(item => {
    item.addEventListener('click', e => {
        e.preventDefault();
        const target = document.querySelector(item.getAttribute('href'));
        target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
        });
    });
});

        // å¡ç‰‡äº¤äº’åŠ¨ç”»
        document.querySelectorAll('.etiquette-card').forEach(card => {
            card.addEventListener('mouseenter', () => {
                card.style.transform = 'translateY(-5px) scale(1.02)';
            });
            
            card.addEventListener('mouseleave', () => {
                card.style.transform = 'translateY(0) scale(1)';
            });
        });
         // å¼¹çª—äº¤äº’é€»è¾‘
         document.querySelectorAll('.tool-item').forEach(item => {
            item.addEventListener('click', () => {
                const modal = document.getElementById('detailModal');
                const details = JSON.parse(item.dataset.details);
                
                // è®¾ç½®å¼¹çª—å†…å®¹
                const imgSrc = item.querySelector('img').src.replace('-thumb', '-large');
                modal.querySelector('.modal-img').src = imgSrc;
                modal.querySelector('.modal-title').textContent = item.querySelector('.tool-name').textContent;
                
                // æ„å»ºå‚æ•°åˆ—è¡¨
                const specsHtml = Object.entries(details)
                    .map(([key, value]) => `
                        <li>
                            <span>${getSpecLabel(key)}</span>
                            <span>${value}</span>
                        </li>
                    `).join('');
                
                modal.querySelector('.modal-specs').innerHTML = specsHtml;
                modal.style.display = 'block';
            });
        });

        // å…³é—­å¼¹çª—é€»è¾‘
        document.querySelector('.modal-close').addEventListener('click', closeModal);
        window.addEventListener('keydown', (e) => e.key === 'Escape' && closeModal());
        window.addEventListener('click', (e) => e.target.classList.contains('tea-modal') && closeModal());

        function closeModal() {
            document.getElementById('detailModal').style.display = 'none';
        }

        function getSpecLabel(key) {
            const labels = {
                material: 'æè´¨',
                capacity: 'å®¹é‡',
                size: 'å°ºå¯¸',
                weight: 'é‡é‡',
                brew: 'é€‚ç”¨èŒ¶ç±»',
                feature: 'ç‰¹ç‚¹'
            };
            return labels[key] || key;
        }


        // step
        // äº¤äº’åŠ¨ç”»è§¦å‘
document.addEventListener('DOMContentLoaded', () => {
    const steps = document.querySelectorAll('.timeline-step');
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.animationDelay = `${entry.target.dataset.delay || 0}s`;
                entry.target.classList.add('animate-slide');
            }
        });
    }, {
        threshold: 0.2
    });

    steps.forEach((step, index) => {
        step.dataset.delay = index * 0.15;
        observer.observe(step);
    });
});

// æ­¥éª¤è¿½è¸ªé€»è¾‘
const stepObserver = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    if(entry.isIntersecting) {
      const stepIndex = parseInt(entry.target.dataset.step);
      updateProgress(stepIndex);
    }
  });
}, { threshold: 0.5 });

// åˆå§‹åŒ–è§‚å¯Ÿ
document.querySelectorAll('.timeline-step').forEach((step, index) => {
  step.dataset.step = index + 1;
  stepObserver.observe(step);
});

function updateProgress(currentStep) {
  // æ›´æ–°ç¯å½¢è¿›åº¦
  const circumference = 2 * Math.PI * 38;
  const progress = (currentStep - 1) / 7;
  const offset = circumference - (progress * circumference);
  document.querySelector('.ring-fill').style.strokeDashoffset = offset;

  // æ›´æ–°å½“å‰æ­¥éª¤ç¼–å·
  const chineseNumbers = ['å£¹','è´°','å','è‚†','ä¼','é™†','æŸ’'];
  document.querySelector('.current-step').textContent = chineseNumbers[currentStep - 1];

  // æ›´æ–°æ­¥éª¤ç‚¹çŠ¶æ€
  document.querySelectorAll('.step-dot').forEach((dot, index) => {
    dot.classList.toggle('active', index < currentStep);
  });
}

// ç‚¹å‡»æ­¥éª¤ç‚¹è·³è½¬
document.querySelectorAll('.step-dot').forEach((dot, index) => {
  dot.addEventListener('click', () => {
    const targetStep = document.querySelector(`[data-step="${index + 1}"]`);
    targetStep.scrollIntoView({ 
      behavior: 'smooth',
      block: 'center'
    });
  });
});

class GestureAnimation {
  constructor() {
    this.paths = document.querySelectorAll('.motion-path');
    this.cursor = document.querySelector('.motion-cursor');
    this.currentAnim = null;
    
    // ç»‘å®šæ­¥éª¤è§‚å¯Ÿå™¨
    this.setupObservers();
  }

  setupObservers() {
    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if(entry.isIntersecting) {
          this.playPathAnimation(entry.target.dataset.step);
        }
      });
    }, { threshold: 0.5 });

    document.querySelectorAll('.timeline-step').forEach(step => {
      observer.observe(step);
    });
  }

  playPathAnimation(stepNumber) {
    // åœæ­¢å½“å‰åŠ¨ç”»
    if(this.currentAnim) {
      this.currentAnim.pause();
      this.cursor.style.opacity = 0;
    }

    const path = Array.from(this.paths).find(p => p.dataset.step === stepNumber);
    if(!path) return;

    // åˆ›å»ºè·¯å¾„åŠ¨ç”»
    const pathLength = path.getTotalLength();
    const duration = pathLength * 15; // æ ¹æ®è·¯å¾„é•¿åº¦åŠ¨æ€è®¡ç®—æ—¶é—´
    
    this.cursor.style.opacity = 1;
    this.cursor.style.transform = `
      translate(${path.getPointAtLength(0).x}px, 
               ${path.getPointAtLength(0).y}px)
    `;

    this.currentAnim = this.cursor.animate([
      { transform: `translate(${path.getPointAtLength(0).x}px, 
                              ${path.getPointAtLength(0).y}px)` },
      { transform: `translate(${path.getPointAtLength(pathLength).x}px, 
                              ${path.getPointAtLength(pathLength).y}px)` }
    ], {
      duration: duration,
      easing: 'cubic-bezier(0.4, 0, 0.2, 1)'
    });

    // è·¯å¾„é«˜äº®è”åŠ¨
    path.classList.add('active');
    this.currentAnim.onfinish = () => path.classList.remove('active');
  }
}
let isRecording = false;
let recordedPath = [];

canvas.addEventListener('touchstart', () => {
  isRecording = true;
  recordedPath = [];
});

canvas.addEventListener('touchmove', (e) => {
  if(isRecording) {
    recordedPath.push({x: e.touches[0].clientX, y: e.touches[0].clientY});
  }
});

canvas.addEventListener('touchend', () => {
  isRecording = false;
  analyzeGesture(recordedPath);
});

// åˆå§‹åŒ–åŠ¨ç”»ç³»ç»Ÿ
const gestureAnim = new GestureAnimation();


// äº¤äº’å¢å¼ºè„šæœ¬
document.querySelectorAll('.etiquette-item').forEach(item => {
    // ç‚¹å‡»å±•å¼€è¯¦ç»†ä¿¡æ¯
    item.addEventListener('click', () => {
        const detail = item.querySelector('.etiquette-detail');
        detail.style.maxHeight = detail.style.maxHeight ? null : `${detail.scrollHeight}px`;
    });

    // é”®ç›˜å¯¼èˆªæ”¯æŒ
    item.addEventListener('keydown', (e) => {
        if(e.key === 'Enter') {
            item.click();
        }
    });
});
// æ–°å¢äº¤äº’é€»è¾‘
document.querySelectorAll('.knock-animation').forEach(anim => {
    let count = 0;
    anim.addEventListener('click', () => {
        if(count++ % 2 === 0) {
            anim.style.animation = 'knock-effect 0.3s ease';
        }
    });
});

// å¥‰èŒ¶é¡ºåºæ‹–æ‹½æ’åº
const orderAnimation = document.querySelector('.order-animation');
new Sortable(orderAnimation, {
    animation: 150,
    handle: '.person-icon',
    onUpdate: () => playOrderHint()
});

function playOrderHint() {
    const icons = document.querySelectorAll('.person-icon');
    icons.forEach((icon, i) => {
        setTimeout(() => {
            icon.style.transform = 'scale(1.2)';
            setTimeout(() => icon.style.transform = '', 300);
        }, i * 200);
    });
}

    </script>
</body>
</html>